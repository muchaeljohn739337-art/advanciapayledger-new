---
# Template for Kubernetes Secrets
# This file defines the structure of secrets that should be created for each environment

apiVersion: v1
kind: Secret
metadata:
  name: api-gateway-secrets
  namespace: platform-core
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: api-gateway
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  JWT_SECRET: "${JWT_SECRET}"
  API_KEY: "${API_KEY}"
  ENCRYPTION_KEY: "${ENCRYPTION_KEY}"
  CORS_ORIGIN: "${CORS_ORIGIN:-https://dashboard.advancia.com}"
  RATE_LIMIT_MAX_REQUESTS: "${RATE_LIMIT_MAX_REQUESTS:-1000}"
  RATE_LIMIT_WINDOW_MS: "${RATE_LIMIT_WINDOW_MS:-900000}"

---
apiVersion: v1
kind: Secret
metadata:
  name: auth-service-secrets
  namespace: platform-core
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: auth-service
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  SESSION_SECRET: "${SESSION_SECRET}"
  OAUTH_CLIENT_SECRET: "${OAUTH_CLIENT_SECRET}"
  ENCRYPTION_KEY: "${ENCRYPTION_KEY}"
  JWT_EXPIRES_IN: "${JWT_EXPIRES_IN:-24h}"
  REFRESH_TOKEN_EXPIRES_IN: "${REFRESH_TOKEN_EXPIRES_IN:-7d}"

---
apiVersion: v1
kind: Secret
metadata:
  name: database-credentials
  namespace: platform-core
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: database
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  POSTGRES_USER: "${POSTGRES_USER}"
  POSTGRES_PASSWORD: "${POSTGRES_PASSWORD}"
  POSTGRES_DB: "${POSTGRES_DB}"
  POSTGRES_HOST: "${POSTGRES_HOST:-postgres.platform-core.svc.cluster.local}"
  POSTGRES_PORT: "${POSTGRES_PORT:-5432}"
  DATABASE_URL: "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST:-postgres.platform-core.svc.cluster.local}:${POSTGRES_PORT:-5432}/${POSTGRES_DB}"

---
apiVersion: v1
kind: Secret
metadata:
  name: redis-credentials
  namespace: platform-core
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: cache
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  REDIS_PASSWORD: "${REDIS_PASSWORD}"
  REDIS_HOST: "${REDIS_HOST:-redis.platform-core.svc.cluster.local}"
  REDIS_PORT: "${REDIS_PORT:-6379}"
  REDIS_DB: "${REDIS_DB:-0}"
  url: "redis://:${REDIS_PASSWORD}@${REDIS_HOST:-redis.platform-core.svc.cluster.local}:${REDIS_PORT:-6379}/${REDIS_DB:-0}"

---
apiVersion: v1
kind: Secret
metadata:
  name: monitoring-service-secrets
  namespace: services
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: monitoring-service
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  DATABASE_URL: "${MONITORING_DATABASE_URL}"
  API_KEY: "${MONITORING_API_KEY}"
  AWS_REGION: "${AWS_REGION:-us-east-1}"
  CLOUDWATCH_NAMESPACE: "${CLOUDWATCH_NAMESPACE:-advancia/monitoring}"
  LOG_LEVEL: "${LOG_LEVEL:-info}"

---
apiVersion: v1
kind: Secret
metadata:
  name: ai-orchestrator-secrets
  namespace: services
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: ai-orchestrator
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  DATABASE_URL: "${AI_DATABASE_URL}"
  BEDROCK_API_KEY: "${BEDROCK_API_KEY}"
  BEDROCK_REGION: "${BEDROCK_REGION:-us-east-1}"
  MODEL_API_KEY: "${MODEL_API_KEY}"
  S3_MODELS_BUCKET: "${S3_MODELS_BUCKET:-advancia-ai-models}"
  S3_TRAINING_BUCKET: "${S3_TRAINING_BUCKET:-advancia-training-data}"
  AWS_REGION: "${AWS_REGION:-us-east-1}"
  LOG_LEVEL: "${LOG_LEVEL:-info}"
  MAX_CONCURRENT_REQUESTS: "${MAX_CONCURRENT_REQUESTS:-10}"

---
apiVersion: v1
kind: Secret
metadata:
  name: billing-service-secrets
  namespace: services
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: billing-service
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  DATABASE_URL: "${BILLING_DATABASE_URL}"
  STRIPE_SECRET_KEY: "${STRIPE_SECRET_KEY}"
  STRIPE_WEBHOOK_SECRET: "${STRIPE_WEBHOOK_SECRET}"
  WEBHOOK_SECRET: "${WEBHOOK_SECRET}"
  AWS_REGION: "${AWS_REGION:-us-east-1}"
  LOG_LEVEL: "${LOG_LEVEL:-info}"

---
apiVersion: v1
kind: Secret
metadata:
  name: notification-service-secrets
  namespace: services
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: notification-service
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  DATABASE_URL: "${NOTIFICATION_DATABASE_URL}"
  SENDGRID_API_KEY: "${SENDGRID_API_KEY}"
  SMTP_HOST: "${SMTP_HOST}"
  SMTP_PORT: "${SMTP_PORT:-587}"
  SMTP_USER: "${SMTP_USER}"
  SMTP_PASSWORD: "${SMTP_PASSWORD}"
  AWS_REGION: "${AWS_REGION:-us-east-1}"
  LOG_LEVEL: "${LOG_LEVEL:-info}"

---
apiVersion: v1
kind: Secret
metadata:
  name: tenant-service-secrets
  namespace: platform-core
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: tenant-service
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  DATABASE_URL: "${TENANT_DATABASE_URL}"
  ENCRYPTION_KEY: "${ENCRYPTION_KEY}"
  AWS_REGION: "${AWS_REGION:-us-east-1}"
  LOG_LEVEL: "${LOG_LEVEL:-info}"
  DEFAULT_TENANT_PLAN: "${DEFAULT_TENANT_PLAN:-basic}"

---
# External Service Integration Secrets
apiVersion: v1
kind: Secret
metadata:
  name: external-services
  namespace: platform-core
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: integrations
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  WEB3_PROVIDER_URL: "${WEB3_PROVIDER_URL}"
  WEB3_PRIVATE_KEY: "${WEB3_PRIVATE_KEY}"
  BLOCKCHAIN_NETWORK: "${BLOCKCHAIN_NETWORK:-ethereum}"
  CIRCLE_API_KEY: "${CIRCLE_API_KEY}"
  PLAGARISM_API_KEY: "${PLAGARISM_API_KEY}"
  AWS_ACCESS_KEY_ID: "${AWS_ACCESS_KEY_ID}"
  AWS_SECRET_ACCESS_KEY: "${AWS_SECRET_ACCESS_KEY}"
  AWS_REGION: "${AWS_REGION:-us-east-1}"

---
# SSL/TLS Certificates
apiVersion: v1
kind: Secret
metadata:
  name: tls-certs
  namespace: platform-core
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: certificates
    app.kubernetes.io/managed-by: manual
type: kubernetes.io/tls
data:
  tls.crt: "${TLS_CERT_BASE64}"
  tls.key: "${TLS_KEY_BASE64}"

---
# Ingress Controller Secrets
apiVersion: v1
kind: Secret
metadata:
  name: ingress-secrets
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: advancia
    app.kubernetes.io/component: ingress
    app.kubernetes.io/managed-by: manual
type: Opaque
stringData:
  BASIC_AUTH_USERNAME: "${BASIC_AUTH_USERNAME}"
  BASIC_AUTH_PASSWORD: "${BASIC_AUTH_PASSWORD}"
  OIDC_CLIENT_ID: "${OIDC_CLIENT_ID}"
  OIDC_CLIENT_SECRET: "${OIDC_CLIENT_SECRET}"
