---
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: vault-secret-store
  namespace: platform-core
spec:
  provider:
    vault:
      server: "http://vault.vault.svc:8200"
      path: "secret"
      version: "v2"
      auth:
        kubernetes:
          mountPath: "kubernetes"
          role: "advancia-platform"
---
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: vault-secret-store
  namespace: services
spec:
  provider:
    vault:
      server: "http://vault.vault.svc:8200"
      path: "secret"
      version: "v2"
      auth:
        kubernetes:
          mountPath: "kubernetes"
          role: "advancia-platform"
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: api-gateway-secrets
  namespace: platform-core
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: api-gateway-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/api-gateway
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: auth-service-secrets
  namespace: platform-core
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: auth-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/auth-service
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: tenant-service-secrets
  namespace: platform-core
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: tenant-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/tenant-service
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: billing-service-secrets
  namespace: services
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: billing-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/billing-service
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: monitoring-service-secrets
  namespace: services
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: monitoring-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/monitoring-service
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: ai-orchestrator-secrets
  namespace: services
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: ai-orchestrator-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/ai-orchestrator
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: notification-service-secrets
  namespace: services
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: notification-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/notification-service
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: security-service-secrets
  namespace: services
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: security-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/security-service
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: audit-log-service-secrets
  namespace: services
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: audit-log-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/audit-log-service
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: metering-service-secrets
  namespace: services
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: metering-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/metering-service
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: web3-event-service-secrets
  namespace: services
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: vault-secret-store
    kind: SecretStore
  target:
    name: web3-event-service-secrets
    creationPolicy: Owner
  dataFrom:
    - secretRef:
        name: advancia/web3-event-service
